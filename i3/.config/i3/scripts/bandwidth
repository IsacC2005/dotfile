#!/bin/bash
INTERFACE="wlp2s0"

# Leer bytes actuales
R1=$(cat /sys/class/net/$INTERFACE/statistics/rx_bytes)
T1=$(cat /sys/class/net/$INTERFACE/statistics/tx_bytes)
sleep 1
R2=$(cat /sys/class/net/$INTERFACE/statistics/rx_bytes)
T2=$(cat /sys/class/net/$INTERFACE/statistics/tx_bytes)

# Calcular velocidad en KB/s
TBPS=$((($T2 - $T1) / 1024))
RBPS=$((($R2 - $R1) / 1024))

# Función para formatear (KB o MB)
format_speed() {
    local speed=$1
    if [ "$speed" -gt 1024 ]; then
        # Calcula MB con un decimal (usando bc para precisión)
        echo "$(echo "scale=1; $speed/1024" | bc)M"
    else
        echo "${speed}K"
    fi
}

# Mostrar resultado final
echo "⬇ $(format_speed $RBPS) ⬆ $(format_speed $TBPS)"
